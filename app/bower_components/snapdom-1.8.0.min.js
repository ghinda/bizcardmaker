(()=>{var Rt=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var ot=(t,e,o)=>e in t?Rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,_=(t,e)=>{for(var o in e||(e={}))at.call(e,o)&&ot(t,o,e[o]);if(Y)for(var o of Y(e))rt.call(e,o)&&ot(t,o,e[o]);return t};var st=(t,e)=>{var o={};for(var l in t)at.call(t,l)&&e.indexOf(l)<0&&(o[l]=t[l]);if(t!=null&&Y)for(var l of Y(t))e.indexOf(l)<0&&rt.call(t,l)&&(o[l]=t[l]);return o};var m=(t,e,o)=>new Promise((l,c)=>{var n=s=>{try{i(o.next(s))}catch(r){c(r)}},a=s=>{try{i(o.throw(s))}catch(r){c(r)}},i=s=>s.done?l(s.value):Promise.resolve(s.value).then(n,a);i((o=o.apply(t,e)).next())});var N=new Map,B=new Map,$=new Map,F=new Map,M=new Map,Q=new WeakMap,T=new Set;var At=["div","span","p","a","img","ul","li","button","input","select","textarea","label","section","article","header","footer","nav","main","aside","h1","h2","h3","h4","h5","h6","svg","path","circle","rect","line","g","table","thead","tbody","tr","td","th"];function it(){for(let t of At)ct(t)}function ct(t){if(F.has(t))return F.get(t);if(new Set(["script","style","meta","link","noscript","template"]).has(t)){let a={};return F.set(t,a),a}let o=document.getElementById("snapdom-sandbox");o||(o=document.createElement("div"),o.id="snapdom-sandbox",o.style.position="absolute",o.style.left="-9999px",o.style.top="-9999px",o.style.width="0",o.style.height="0",o.style.overflow="hidden",document.body.appendChild(o));let l=document.createElement(t);l.style.all="initial",o.appendChild(l);let c=getComputedStyle(l),n={};for(let a of c)n[a]=c.getPropertyValue(a);return o.removeChild(l),F.set(t,n),n}function V(t,e,o=!1){let l=[],c=ct(e);for(let[n,a]of Object.entries(t))if(!o)a&&l.push(`${n}:${a}`);else{let i=c[n];a&&a!==i&&l.push(`${n}:${a}`)}return l.sort().join(";")}function lt(t){let e=new Set;return t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(t.tagName&&e.add(t.tagName.toLowerCase()),typeof t.querySelectorAll=="function"&&t.querySelectorAll("*").forEach(o=>e.add(o.tagName.toLowerCase())),Array.from(e))}function dt(t){let e=new Map;for(let l of t){let c=F.get(l);if(!c)continue;let n=Object.entries(c).map(([a,i])=>`${a}:${i};`).sort().join("");e.has(n)||e.set(n,[]),e.get(n).push(l)}let o="";for(let[l,c]of e.entries())o+=`${c.join(",")} { ${l} }
`;return o}function ft(t){let e=new Set(t.values()),o=new Map,l=1;for(let c of e)o.set(c,`c${l++}`);return o}function O(o){return m(this,arguments,function*(t,e={}){let l=t.startsWith("url("),c=/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(t);if(l){let n=q(t);if(!n)return t;let a=Z(n);if(B.has(a))return e.skipInline?void 0:`url(${B.get(a)})`;{let i=e.crossOrigin?e.crossOrigin(a):"anonymous",s=yield U(a,3e3,i);return B.set(a,s),e.skipInline?void 0:`url(${s})`}}return t})}function D(t,{fast:e=!1}={}){if(e)return t();"requestIdleCallback"in window?requestIdleCallback(t,{timeout:50}):setTimeout(t,1)}function L(t,e=null){if(!(t instanceof Element))return window.getComputedStyle(t,e);let o=Q.get(t);if(o||(o=new Map,Q.set(t,o)),!o.has(e)){let l=window.getComputedStyle(t,e);o.set(e,l)}return o.get(e)}function mt(t){let e=t.replace(/^['"]|['"]$/g,"");if(e.startsWith("\\"))try{return String.fromCharCode(parseInt(e.replace("\\",""),16))}catch(o){return e}return e}function q(t){let e=t.indexOf("url(");if(e===-1)return null;let o=t.slice(e+4).trim();return o.endsWith(")")&&(o=o.slice(0,-1).trim()),(o.startsWith('"')&&o.endsWith('"')||o.startsWith("'")&&o.endsWith("'"))&&(o=o.slice(1,-1)),o}function z(t){return[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/lucide/i].some(o=>o.test(t))}function U(t,e=3e3,o="anonymous"){return N.has(t)?Promise.resolve(N.get(t)):new Promise((l,c)=>{let n=setTimeout(()=>{c(new Error("Image load timed out"))},e),a=new Image;a.crossOrigin=o,a.onload=()=>m(null,null,function*(){clearTimeout(n);try{yield a.decode();let i=document.createElement("canvas");i.width=a.width,i.height=a.height,i.getContext("2d").drawImage(a,0,0,i.width,i.height);try{let r=i.toDataURL("image/png");N.set(t,r),l(r)}catch(r){c(new Error("CORS restrictions prevented image capture"))}}catch(i){c(i)}}),a.onerror=i=>{clearTimeout(n),c(new Error("Failed to load image: "+(i.message||"Unknown error")))},a.src=t})}function H(t){let e={};for(let o of t)e[o]=t.getPropertyValue(o);return e}function X(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ht(t){if(!t||t==="none")return"";let e=t.replace(/translate[XY]?\([^)]*\)/g,"");return e=e.replace(/matrix\(([^)]+)\)/g,(o,l)=>{let c=l.split(",").map(n=>n.trim());return c.length!==6?`matrix(${l})`:(c[4]="0",c[5]="0",`matrix(${c.join(", ")})`)}),e=e.replace(/matrix3d\(([^)]+)\)/g,(o,l)=>{let c=l.split(",").map(n=>n.trim());return c.length!==16?`matrix3d(${l})`:(c[12]="0",c[13]="0",`matrix3d(${c.join(", ")})`)}),e.trim().replace(/\s{2,}/g," ")}function Z(t){try{let e=decodeURI(t);return encodeURI(e)}catch(e){return t}}function W(t){let e=[],o=0,l=0;for(let c=0;c<t.length;c++){let n=t[c];n==="("&&o++,n===")"&&o--,n===","&&o===0&&(e.push(t.slice(l,c).trim()),l=c+1)}return e.push(t.slice(l).trim()),e}function tt(t,e,o,l,c){var r;if(t.tagName==="STYLE")return;l.has(t)||l.set(t,L(t));let n=l.get(t),a=H(n),i=((r=t.tagName)==null?void 0:r.toLowerCase())||"div",s=V(a,i,c);o.set(e,s)}function K(t,e,o,l,c){var i;if(t.nodeType===Node.ELEMENT_NODE&&t.getAttribute("data-capture")==="exclude"){let s=document.createElement("div"),r=t.getBoundingClientRect();return s.style.cssText=`display: inline-block; width: ${r.width}px; height: ${r.height}px; visibility: hidden;`,s}if(t.tagName==="IFRAME"){let s=document.createElement("div");return s.textContent="",s.style.cssText=`width: ${t.offsetWidth}px; height: ${t.offsetHeight}px; background-image: repeating-linear-gradient(45deg, #ddd, #ddd 5px, #f9f9f9 5px, #f9f9f9 10px);display: flex;align-items: center;justify-content: center;font-size: 12px;color: #555; border: 1px solid #aaa;`,s}if(t.nodeType===Node.ELEMENT_NODE&&t.getAttribute("data-capture")==="placeholder"){let s=t.cloneNode(!1);l.set(s,t),tt(t,s,e,o,c);let r=document.createElement("div");return r.textContent=t.getAttribute("data-placeholder-text")||"",r.style.cssText="color: #666;font-size: 12px;text-align: center;line-height: 1.4;padding: 0.5em;box-sizing: border-box;",s.appendChild(r),s}if(t.tagName==="CANVAS"){let s=t.toDataURL(),r=document.createElement("img");return r.src=s,r.width=t.width,r.height=t.height,r.style.display="inline-block",r.style.width=t.style.width||`${t.width}px`,r.style.height=t.style.height||`${t.height}px`,r}if(t.nodeType===Node.TEXT_NODE){if((i=t.parentElement)!=null&&i.shadowRoot){let s=t.parentElement.tagName.toLowerCase();if(customElements.get(s))return null}return t.cloneNode(!0)}if(t.nodeType!==Node.ELEMENT_NODE)return t.cloneNode(!0);let n=t.cloneNode(!1);l.set(n,t),t instanceof HTMLInputElement?(n.value=t.value,n.setAttribute("value",t.value),t.checked!==void 0&&(n.checked=t.checked,t.checked&&n.setAttribute("checked",""))):t instanceof HTMLTextAreaElement?(n.value=t.value,n.textContent=t.value):t instanceof HTMLSelectElement&&(n.value=t.value,Array.from(n.options).forEach(s=>{s.value===t.value?s.setAttribute("selected",""):s.removeAttribute("selected")})),tt(t,n,e,o,c);let a=document.createDocumentFragment();if(t.childNodes.forEach(s=>{let r=K(s,e,o,l,c);r&&a.appendChild(r)}),n.appendChild(a),t.shadowRoot){let s=Array.from(t.shadowRoot.children).filter(f=>f.tagName!=="STYLE").map(f=>K(f,e,o,l)).filter(Boolean),r=document.createDocumentFragment();s.forEach(f=>r.appendChild(f)),n.appendChild(r)}return n}function ut(t,e,o,l=32,c="#000"){return m(this,null,function*(){e=e.replace(/^['"]+|['"]+$/g,"");let n=window.devicePixelRatio||1,i=document.createElement("canvas").getContext("2d");i.font=o?`${o} ${l}px "${e}"`:`${l}px "${e}"`;let s=i.measureText(t),r=s.actualBoundingBoxAscent||l*.8,f=s.actualBoundingBoxDescent||l*.2,h=r+f,u=s.width,w=document.createElement("canvas");w.width=Math.ceil(u*n),w.height=Math.ceil(h*n);let d=w.getContext("2d");return d.scale(n,n),d.font=i.font,d.textAlign="left",d.textBaseline="alphabetic",d.fillStyle=c,d.fillText(t,0,r),w.toDataURL()})}function pt(t){return Array.from(document.styleSheets).some(e=>e.href===t)}function Nt(t){return new Promise(e=>{if(pt(t))return e(null);let o=document.createElement("link");o.rel="stylesheet",o.href=t,o.setAttribute("data-snapdom","injected-import"),o.onload=()=>e(o),o.onerror=()=>e(null),document.head.appendChild(o)})}function J(){return m(this,arguments,function*({ignoreIconFonts:t=!0,preCached:e=!1}={}){if($.has("fonts-embed-css")){if(e){let a=document.createElement("style");a.setAttribute("data-snapdom","embedFonts"),a.textContent=$.get("fonts-embed-css"),document.head.appendChild(a)}return $.get("fonts-embed-css")}let o=/@import\s+url\(["']?([^"')]+)["']?\)/g,l=[];for(let a of document.querySelectorAll("style")){let i=a.textContent||"",s=Array.from(i.matchAll(o));for(let r of s){let f=r[1];pt(f)||l.push(f)}}yield Promise.all(l.map(Nt));let c=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(a=>a.href),n="";for(let a of c)try{let s=yield(yield fetch(a.href)).text();if(t&&(z(a.href)||z(s)))continue;let r=/url\((["']?)([^"')]+)\1\)/g,f=yield Promise.all(Array.from(s.matchAll(r)).map(u=>m(null,null,function*(){let w=q(u[0]);if(!w)return null;let d=w;if(!d.startsWith("http")&&!d.startsWith("data:")&&(d=new URL(d,a.href).href),t&&z(d))return null;if($.has(d))return T.add(d),{original:u[0],inlined:`url(${$.get(d)})`};if(T.has(d))return null;try{let g=yield(yield fetch(d)).blob(),C=yield new Promise(p=>{let S=new FileReader;S.onload=()=>p(S.result),S.readAsDataURL(g)});return $.set(d,C),T.add(d),{original:u[0],inlined:`url(${C})`}}catch(x){return console.warn("[snapdom] Failed to fetch font resource:",d),null}}))),h=s;for(let u of f)u&&(h=h.replace(u.original,u.inlined));n+=h+`
`}catch(i){console.warn("[snapdom] Failed to fetch CSS:",a.href)}for(let a of document.styleSheets)try{if(!a.href||c.every(i=>i.href!==a.href)){for(let i of a.cssRules)if(i.type===CSSRule.FONT_FACE_RULE){let s=i.style.getPropertyValue("src");if(!s)continue;let r=/url\((["']?)([^"')]+)\1\)/g,f=s,h=Array.from(s.matchAll(r));for(let u of h){let w=u[2].trim();if(!w)continue;let d=w;if(!d.startsWith("http")&&!d.startsWith("data:")&&(d=new URL(d,a.href||location.href).href),!(t&&z(d))){if($.has(d)){T.add(d),f=f.replace(u[0],`url(${$.get(d)})`);continue}if(!T.has(d))try{let g=yield(yield fetch(d)).blob(),C=yield new Promise(p=>{let S=new FileReader;S.onload=()=>p(S.result),S.readAsDataURL(g)});$.set(d,C),T.add(d),f=f.replace(u[0],`url(${C})`)}catch(x){console.warn("[snapdom] Failed to fetch font URL:",d)}}}n+=`@font-face {
  font-family: ${i.style.getPropertyValue("font-family")};
  src: ${f};
  font-style: ${i.style.getPropertyValue("font-style")||"normal"};
  font-weight: ${i.style.getPropertyValue("font-weight")||"normal"};
}
`}}}catch(i){console.warn("[snapdom] Cannot access stylesheet",a.href,i)}for(let a of document.fonts)if(a.family&&a.status==="loaded"&&a._snapdomSrc){let i=a._snapdomSrc;if(!i.startsWith("data:")){if($.has(a._snapdomSrc))i=$.get(a._snapdomSrc),T.add(a._snapdomSrc);else if(!T.has(a._snapdomSrc))try{let r=yield(yield fetch(a._snapdomSrc)).blob();i=yield new Promise(f=>{let h=new FileReader;h.onload=()=>f(h.result),h.readAsDataURL(r)}),$.set(a._snapdomSrc,i),T.add(a._snapdomSrc)}catch(s){console.warn("[snapdom] Failed to fetch dynamic font src:",a._snapdomSrc);continue}}n+=`@font-face {
  font-family: '${a.family}';
  src: url(${i});
  font-style: ${a.style||"normal"};
  font-weight: ${a.weight||"normal"};
}
`}if(n&&($.set("fonts-embed-css",n),e)){let a=document.createElement("style");a.setAttribute("data-snapdom","embedFonts"),a.textContent=n,document.head.appendChild(a)}return n})}function et(t,e,o,l,c,n=!1){return m(this,null,function*(){if(!(t instanceof Element)||!(e instanceof Element))return;for(let s of["::before","::after","::first-letter"])try{let r=L(t,s);if(!r||typeof r[Symbol.iterator]!="function")continue;if(s==="::first-letter"){let g=getComputedStyle(t);if(!(r.color!==g.color||r.fontSize!==g.fontSize||r.fontWeight!==g.fontWeight))continue;let p=Array.from(e.childNodes).find(E=>E.nodeType===Node.TEXT_NODE&&E.textContent&&E.textContent.trim().length>0);if(!p)continue;let S=p.textContent,y=S.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['â€™])?)/u),k=y==null?void 0:y[0],P=S.slice((k==null?void 0:k.length)||0);if(!k||/[\uD800-\uDFFF]/.test(k))continue;let v=document.createElement("span");v.textContent=k,v.dataset.snapdomPseudo="::first-letter";let I=H(r),G=V(I,"span",c);o.set(v,G);let j=document.createTextNode(P);e.replaceChild(j,p),e.insertBefore(v,j);continue}let f=r.getPropertyValue("content"),h=r.getPropertyValue("background-image"),u=r.getPropertyValue("background-color"),w=f!=="none",d=h&&h!=="none",x=u&&u!=="transparent"&&u!=="rgba(0, 0, 0, 0)";if(w||d||x){let g=r.getPropertyValue("font-family"),C=parseInt(r.getPropertyValue("font-size"))||32,p=parseInt(r.getPropertyValue("font-weight"))||!1,S=r.getPropertyValue("color")||"#000",y=document.createElement("span");y.dataset.snapdomPseudo=s;let k=H(r),P=V(k,"span",c);o.set(y,P);let v=g&&/font.*awesome|material|bootstrap|glyphicons|ionicons|remixicon|simple-line-icons|octicons|feather|typicons|weathericons|lucide/i.test(g),I=mt(f);if(!n&&v&&I.length===1){let E=document.createElement("img");E.src=yield ut(I,g,p,C,S),E.style="display:block;width:100%;height:100%;object-fit:contain;",y.appendChild(E)}else if(I.startsWith("url(")){let E=q(I);if(E&&E.trim()!=="")try{let R=document.createElement("img"),A=yield U(Z(E));R.src=A,R.style="display:block;width:100%;height:100%;object-fit:contain;",y.appendChild(R)}catch(R){console.error(`[snapdom] Error in pseudo ${s} for`,t,R)}}else!v&&I&&I!=="none"&&(y.textContent=I);if(d)try{let E=W(h),R=yield Promise.all(E.map(A=>O(A)));y.style.backgroundImage=R.join(", ")}catch(E){console.warn(`[snapdom] Failed to inline background-image for ${s}`,E)}if(x&&(y.style.backgroundColor=u),!(y.childNodes.length>0||y.textContent&&y.textContent.trim()!==""||d||x))continue;s==="::before"?e.insertBefore(y,e.firstChild):e.appendChild(y)}}catch(r){console.warn(`[snapdom] Failed to capture ${s} for`,t,r)}let a=Array.from(t.children),i=Array.from(e.children).filter(s=>!s.dataset.snapdomPseudo);for(let s=0;s<Math.min(a.length,i.length);s++)yield et(a[s],i[s],o,l,c,n)})}function gt(t,e=!1,o=!1){return m(this,null,function*(){var s;let l=new Map,c=new WeakMap,n=new Map,a;try{a=K(t,l,c,n,e)}catch(r){throw console.warn("deepClone failed:",r),r}try{yield et(t,a,l,c,e,o)}catch(r){console.warn("inlinePseudoElements failed:",r)}let i="";if(e){let r=ft(l);i=Array.from(r.entries()).map(([f,h])=>`.${h}{${f}}`).join("");for(let[f,h]of l.entries()){if(f.tagName==="STYLE")continue;let u=r.get(h);u&&f.classList.add(u);let w=(s=f.style)==null?void 0:s.backgroundImage;f.removeAttribute("style"),w&&w!=="none"&&(f.style.backgroundImage=w)}}else for(let[r,f]of l.entries())r.tagName!=="STYLE"&&r.setAttribute("style",f.replace(/;/g,"; "));for(let[r,f]of n.entries()){let h=f.scrollLeft,u=f.scrollTop;if((h||u)&&r instanceof HTMLElement){r.style.overflow="hidden",r.style.scrollbarWidth="none",r.style.msOverflowStyle="none";let d=document.createElement("div");for(d.style.transform=`translate(${-h}px, ${-u}px)`,d.style.willChange="transform",d.style.display="inline-block",d.style.width="100%";r.firstChild;)d.appendChild(r.firstChild);r.appendChild(d)}}if(t===n.get(a)){let r=c.get(t)||window.getComputedStyle(t);c.set(t,r);let f=ht(r.transform);a.style.margin="0",a.style.position="static",a.style.top="auto",a.style.left="auto",a.style.right="auto",a.style.bottom="auto",a.style.zIndex="auto",a.style.float="none",a.style.clear="none",a.style.transform=f||""}return{clone:a,classCSS:i,styleCache:c}})}function yt(o){return m(this,arguments,function*(t,e={}){let l=Array.from(t.querySelectorAll("img")),c=n=>m(null,null,function*(){let a=n.src;try{let i=e.crossOrigin?e.crossOrigin(a):"anonymous",s=yield U(a,3e3,i);n.src=s,n.width||(n.width=n.naturalWidth||100),n.height||(n.height=n.naturalHeight||100)}catch(i){let s=document.createElement("div");s.style=`width: ${n.width||100}px; height: ${n.height||100}px; background: #ccc; display: inline-block; text-align: center; line-height: ${n.height||100}px; color: #666; font-size: 12px;`,s.innerText="img",n.replaceWith(s)}});for(let n=0;n<l.length;n+=4){let a=l.slice(n,n+4).map(c);yield Promise.allSettled(a)}})}function wt(c,n,a){return m(this,arguments,function*(t,e,o,l={}){let i=[[t,e]];for(;i.length;){let[s,r]=i.shift(),f=o.get(s)||L(s);o.has(s)||o.set(s,f);let h=f.getPropertyValue("background-image"),u=f.getPropertyValue("background-color");if(!h||h==="none"){let p=Array.from(s.children),S=Array.from(r.children);for(let y=0;y<Math.min(p.length,S.length);y++)i.push([p[y],S[y]]);continue}let w=W(h),d=yield Promise.all(w.map(p=>O(p,l)));d.some(p=>p&&p!=="none"&&!/^url\(undefined\)/.test(p))&&(r.style.backgroundImage=d.join(", ")),u&&u!=="transparent"&&u!=="rgba(0, 0, 0, 0)"&&(r.style.backgroundColor=u);let g=Array.from(s.children),C=Array.from(r.children);for(let p=0;p<Math.min(g.length,C.length);p++)i.push([g[p],C[p]])}})}function xt(o){return m(this,arguments,function*(t,e={}){if(!t)throw new Error("Element cannot be null or undefined");if(!(t instanceof Element))throw new Error("captureDOM: Only Element nodes are supported");let{compress:l=!0,embedFonts:c=!1,fast:n=!0,scale:a=1}=e,i,s,r,f="",h="",u,w;if({clone:i,classCSS:s,styleCache:r}=yield gt(t,l,c),yield new Promise(x=>{D(()=>m(null,null,function*(){yield yt(i,e),x()}),{fast:n})}),yield new Promise(x=>{D(()=>m(null,null,function*(){yield wt(t,i,r,e),x()}),{fast:n})}),c&&(yield new Promise(x=>{D(()=>m(null,null,function*(){f=yield J({ignoreIconFonts:!c}),x()}),{fast:n})})),l){let x=lt(i).sort(),g=x.join(",");M.has(g)?h=M.get(g):yield new Promise(C=>{D(()=>{h=dt(x),M.set(g,h),C()},{fast:n})})}yield new Promise(x=>{D(()=>{let g=t.getBoundingClientRect(),C=g.width,p=g.height,S=Number.isFinite(e.width),y=Number.isFinite(e.height),k=typeof a=="number"&&a!==1;if(!k){let A=g.width/g.height;S&&y?(C=e.width,p=e.height):S?(C=e.width,p=C/A):y&&(p=e.height,C=p*A)}if(C=Math.ceil(C),p=Math.ceil(p),i.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),i.style.transformOrigin="top left",!k&&(S||y)){let A=g.width,$t=g.height,vt=C/A,kt=p/$t,It=i.style.transform||"",Tt=`scale(${vt}, ${kt})`;i.style.transform=`${Tt} ${It}`.trim()}else k&&X()&&(i.style.scale=`${a}`);let P="http://www.w3.org/2000/svg",v=document.createElementNS(P,"foreignObject");v.setAttribute("width","100%"),v.setAttribute("height","100%");let I=document.createElement("style");I.textContent=h+f+"svg{overflow:visible;}"+s,v.appendChild(I),v.appendChild(i);let j=new XMLSerializer().serializeToString(v);w=`<svg xmlns="${P}" width="${C}" height="${p}" viewBox="0 0 ${C} ${p}">`+j+"</svg>",u=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(w)}`,x()},{fast:n})});let d=document.getElementById("snapdom-sandbox");return d&&d.style.position==="absolute"&&d.remove(),u})}function Lt(l,c){return m(this,arguments,function*(t,{dpr:e=1,scale:o=1}){let n=new Image;return n.src=t,yield n.decode(),X?(n.width=n.width*o,n.height=n.height*o):(n.width=n.width/o,n.height=n.height/o),n})}function Ct(l){return m(this,arguments,function*(t,{dpr:e=1,scale:o=1}={}){let c=new Image;c.src=t,yield c.decode();let n=document.createElement("canvas"),a=c.width*o,i=c.height*o;n.width=Math.ceil(a*e),n.height=Math.ceil(i*e);let s=n.getContext("2d");return s.scale(e,e),s.drawImage(c,0,0,a,i),n.style.width=`${a}px`,n.style.height=`${i}px`,n})}function bt(t){return m(this,null,function*(){let e=decodeURIComponent(t.split(",")[1]);return new Blob([e],{type:"image/svg+xml"})})}function St(c,n,a){return m(this,arguments,function*(t,{dpr:e=1,scale:o=1},l){let i=yield Ct(t,{dpr:e,scale:o});if(!l)return i;let s=document.createElement("canvas");s.width=i.width,s.height=i.height;let r=s.getContext("2d");return r.fillStyle=l,r.fillRect(0,0,s.width,s.height),r.drawImage(i,0,0),s})}function nt(a,i){return m(this,arguments,function*(t,{dpr:e=1,scale:o=1,backgroundColor:l="#fff",quality:c},n="png"){let s=yield St(t,{dpr:e,scale:o},l),r=new Image;return r.src=s.toDataURL(`image/${n}`,c),yield r.decode(),r.style.width=`${s.width/e}px`,r.style.height=`${s.height/e}px`,r})}function Ut(a){return m(this,arguments,function*(t,{dpr:e=1,scale:o=1,backgroundColor:l="#fff",format:c="png",filename:n="capture"}={}){if(c==="svg"){let w=yield bt(t),d=URL.createObjectURL(w),x=document.createElement("a");x.href=d,x.download=`${n}.svg`,x.click(),URL.revokeObjectURL(d);return}let i=["jpg","jpeg","webp"].includes(c)?"#fff":void 0,s=l!=null?l:i,r=yield St(t,{dpr:e,scale:o},s),f={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"}[c]||"image/png",h=r.toDataURL(f),u=document.createElement("a");u.href=h,u.download=`${n}.${c}`,u.click()})}function b(o){return m(this,arguments,function*(t,e={}){if(e=_({scale:1},e),!t)throw new Error("Element cannot be null or undefined");return yield b.capture(t,e)})}b.capture=(o,...l)=>m(null,[o,...l],function*(t,e={}){let c=yield xt(t,e),n=window.devicePixelRatio||1,a=e.scale||1;return{url:c,options:e,toRaw:()=>c,toImg:()=>Lt(c,{dpr:n,scale:a}),toCanvas:()=>Ct(c,{dpr:n,scale:a}),toBlob:()=>bt(c),toPng:i=>nt(c,_({dpr:n,scale:a},i),"png"),toJpg:i=>nt(c,_({dpr:n,scale:a},i),"jpeg"),toWebp:i=>nt(c,_({dpr:n,scale:a},i),"webp"),download:({format:i="png",filename:s="capture",backgroundColor:r}={})=>Ut(c,{dpr:n,scale:a,backgroundColor:r,format:i,filename:s})}});b.toRaw=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toRaw()});b.toImg=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toImg()});b.toCanvas=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toCanvas()});b.toBlob=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toBlob()});b.toPng=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toPng(e)});b.toJpg=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toJpg(e)});b.toWebp=(t,e)=>m(null,null,function*(){return(yield b.capture(t,e)).toWebp(e)});b.download=(o,...l)=>m(null,[o,...l],function*(t,e={}){let r=e,{format:c="png",filename:n="capture",backgroundColor:a}=r,i=st(r,["format","filename","backgroundColor"]);return yield(yield b.capture(t,i)).download({format:c,filename:n,backgroundColor:a})});function Et(){return m(this,arguments,function*(t=document,e={}){let{embedFonts:o=!0,reset:l=!1,crossOrigin:c}=e;if(l){N.clear(),B.clear(),$.clear(),M.clear();return}yield document.fonts.ready,it();let n=[],a=[];t!=null&&t.querySelectorAll&&(n=Array.from(t.querySelectorAll("img[src]")),a=Array.from(t.querySelectorAll("*")));let i=[];for(let s of n){let r=s.src;if(!N.has(r)){let f=c?c(r):"anonymous";i.push(U(r,3e3,f).then(h=>N.set(r,h)).catch(()=>{}))}}for(let s of a){let r=L(s).backgroundImage;if(r&&r!=="none"){let f=W(r);for(let h of f)h.startsWith("url(")&&i.push(O(h,{crossOrigin:c,skipInline:!0}).catch(()=>{}))}}o&&(yield J({ignoreIconFonts:!o,preCached:!0})),yield Promise.all(i)})}window.snapdom=b;window.preCache=Et;})();
